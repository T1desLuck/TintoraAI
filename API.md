# üåê API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è TintoraAI

–í —ç—Ç–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é API —Å–∏—Å—Ç–µ–º—ã TintoraAI –¥–ª—è –∫–æ–ª–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π. API –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫–æ–ª–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –≤–∞—à–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Å–µ—Ä–≤–∏—Å—ã –∏ —Ä–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–±–∑–æ—Ä API](#–æ–±–∑–æ—Ä-api)
- [–ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã](#–Ω–∞—á–∞–ª–æ-—Ä–∞–±–æ—Ç—ã)
- [Endpoints](#endpoints)
- [–ó–∞–ø—É—Å–∫ API-—Å–µ—Ä–≤–µ—Ä–∞](#–∑–∞–ø—É—Å–∫-api-—Å–µ—Ä–≤–µ—Ä–∞)
- [–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤](#–ø—Ä–∏–º–µ—Ä—ã-–∑–∞–ø—Ä–æ—Å–æ–≤)
- [SDK –¥–ª—è Python](#sdk-–¥–ª—è-python)
- [–ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞](#–ø–∞–∫–µ—Ç–Ω–∞—è-–æ–±—Ä–∞–±–æ—Ç–∫–∞)
- [–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Ç–æ–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö](#–æ–±—Ä–∞–±–æ—Ç–∫–∞-–ø–æ—Ç–æ–∫–æ–≤—ã—Ö-–¥–∞–Ω–Ω—ã—Ö)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–∏-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](#–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫)
- [–ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏](#–ø—Ä–∏–º–µ—Ä—ã-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)

## üìù –û–±–∑–æ—Ä API

API TintoraAI –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∫–æ–ª–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –≤—ã–±–æ—Ä–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç–∏–ª–µ–π, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö. API —Ç–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞–∫–µ—Ç–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ API

- üñºÔ∏è –ö–æ–ª–æ—Ä–∏–∑–∞—Ü–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- üìö –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- üé® –í—ã–±–æ—Ä –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç–∏–ª–µ–π –∫–æ–ª–æ—Ä–∏–∑–∞—Ü–∏–∏
- üìä –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ä—Ç –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- üì± –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üöÄ –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.7+
- FastAPI
- PyTorch 1.9+
- TintoraAI —Å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ–±—É—á–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª—å—é

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/T1desLuck/TintoraAI.git
cd TintoraAI

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ API-—Å–µ—Ä–≤–µ—Ä–∞
python API.py --checkpoint experiments/checkpoints/model.pth --port 8000
```

## üîÑ Endpoints

API TintoraAI –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ endpoints:

1. **GET /**
   –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–∞–∑–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± API.

   **–û—Ç–≤–µ—Ç**:
   ```json
   {
     "name": "TintoraAI API",
     "version": "1.0.0",
     "status": "active",
     "model_loaded": true
   }
   ```

2. **GET /health**
   –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ API –∏ –º–æ–¥–µ–ª–∏.

   **–û—Ç–≤–µ—Ç**:
   ```json
   {
     "status": "healthy",
     "model_status": "loaded",
     "load_error": null,
     "active_batches": 0,
     "queue_length": 0,
     "timestamp": "2023-08-08T12:34:56"
   }
   ```

3. **POST /colorize**
   –ö–æ–ª–æ—Ä–∏–∑—É–µ—Ç –æ–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

   **–ó–∞–ø—Ä–æ—Å**:
   ```json
   {
     "image_data": "base64_encoded_image_data",
     "style": "default",
     "color_space": "lab",
     "saturation": 1.0,
     "contrast": 1.0,
     "enhance": false,
     "show_uncertainty": false,
     "style_strength": 1.0,
     "guidance": "–¶–≤–µ—Ç–°—Ç–∏–ª—å:–≤–∏–Ω—Ç–∞–∂"
   }
   ```

   **–û—Ç–≤–µ—Ç**:
   ```json
   {
     "status": "success",
     "message": "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∫–æ–ª–æ—Ä–∏–∑–æ–≤–∞–Ω–æ",
     "request_id": "550e8400-e29b-41d4-a716-446655440000",
     "processing_time": 0.856,
     "colorized_image": "base64_encoded_colorized_image",
     "uncertainty_map": "base64_encoded_uncertainty_map",
     "metadata": {
       "style": "default",
       "color_space": "lab",
       "saturation": 1.0,
       "contrast": 1.0,
       "enhance": false,
       "device": "cuda:0"
     }
   }
   ```

4. **POST /batch/colorize**
   –ù–∞—á–∏–Ω–∞–µ—Ç –ø–∞–∫–µ—Ç–Ω—É—é –∫–æ–ª–æ—Ä–∏–∑–∞—Ü–∏—é –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

   **–ó–∞–ø—Ä–æ—Å**:
   ```json
   {
     "images": ["base64_image1", "base64_image2", "base64_image3"],
     "is_urls": false,
     "style": "vintage",
     "color_space": "lab",
     "saturation": 1.2,
     "contrast": 1.1,
     "enhance": true,
     "notify_url": "https://example.com/webhook",
     "callback_id": "job123",
     "priority": 1
   }
   ```

   **–û—Ç–≤–µ—Ç**:
   ```json
   {
     "status": "accepted",
     "batch_id": "550e8400-e29b-41d4-a716-446655440000",
     "message": "–ü–∞–∫–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –æ—á–µ—Ä–µ–¥—å. –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ /batch/status/550e8400-e29b-41d4-a716-446655440000"
   }
   ```

5. **GET /batch/status/{batch_id}**
   –ü–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.

   **–û—Ç–≤–µ—Ç**:
   ```json
   {
     "batch_id": "550e8400-e29b-41d4-a716-446655440000",
     "status": "processing",
     "total_images": 3,
     "processed_images": 1,
     "progress_percent": 33.33,
     "estimated_time_left": 4.5,
     "errors": []
   }
   ```

6. **GET /batch/results/{batch_id}**
   –ü–æ–ª—É—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.

   **–û—Ç–≤–µ—Ç**:
   ```json
   {
     "batch_id": "550e8400-e29b-41d4-a716-446655440000",
     "status": "completed",
     "total_images": 3,
     "processed_images": 3,
     "results": [
       {
         "index": 0,
         "colorized_image": "base64_encoded_image"
       },
       {
         "index": 1,
         "colorized_image": "base64_encoded_image"
       },
       {
         "index": 2,
         "colorized_image": "base64_encoded_image"
       }
     ],
     "errors": [],
     "processing_time": 2.56
   }
   ```

7. **GET /styles**
   –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å—Ç–∏–ª–µ–π –∫–æ–ª–æ—Ä–∏–∑–∞—Ü–∏–∏.

   **–û—Ç–≤–µ—Ç**:
   ```json
   {
     "styles": [
       {
         "id": "default",
         "name": "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π",
         "description": "–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∫–æ–ª–æ—Ä–∏–∑–∞—Ü–∏—è —Å –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–º–∏ —Ü–≤–µ—Ç–∞–º–∏"
       },
       {
         "id": "vintage",
         "name": "–í–∏–Ω—Ç–∞–∂",
         "description": "–°—Ç–∞—Ä–∏–Ω–Ω—ã–π –≤–∏–¥ —Å –º—è–≥–∫–∏–º–∏ –ø–∞—Å—Ç–µ–ª—å–Ω—ã–º–∏ —Ç–æ–Ω–∞–º–∏"
       },
       {
         "id": "vivid",
         "name": "–Ø—Ä–∫–∏–π",
         "description": "–ù–∞—Å—ã—â–µ–Ω–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è —è—Ä–∫–æ–≥–æ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è"
       }
     ]
   }
   ```

## ‚öôÔ∏è –ó–∞–ø—É—Å–∫ API-—Å–µ—Ä–≤–µ—Ä–∞

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
```bash
# –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫
python API.py --checkpoint experiments/checkpoints/model.pth

# –ó–∞–ø—É—Å–∫ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ö–æ—Å—Ç–∞ –∏ –ø–æ—Ä—Ç–∞
python API.py --checkpoint experiments/checkpoints/model.pth --host 0.0.0.0 --port 8000

# –ó–∞–ø—É—Å–∫ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ä–∞–±–æ—á–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
python API.py --checkpoint experiments/checkpoints/model.pth --workers 4
```

### –ó–∞–ø—É—Å–∫ –≤ Docker
```bash
# –°–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–∞
docker build -t tintorai -f Dockerfile.api .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -p 8000:8000 -v $(pwd)/experiments:/app/experiments tintorai --checkpoint experiments/checkpoints/model.pth
```

### –ó–∞–ø—É—Å–∫ –Ω–∞ –æ–±–ª–∞—á–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö

#### Heroku
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ Heroku app
heroku create tintorai-api

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ buildpacks
heroku buildpacks:add https://github.com/heroku/heroku-buildpack-python

# –î–µ–ø–ª–æ–π
git push heroku main
```

#### Google Cloud Run
```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ –¥–ª—è Cloud Run
gcloud builds submit --tag gcr.io/your-project/tintorai-api

# –î–µ–ø–ª–æ–π –Ω–∞ Cloud Run
gcloud run deploy tintorai-api --image gcr.io/your-project/tintorai-api --platform managed
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –ö–æ–ª–æ—Ä–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (curl)
```bash
curl -X POST "http://localhost:8000/colorize" \
     -H "Content-Type: application/json" \
     -d '{
           "image_data": "'$(base64 -w0 input.jpg)'",
           "style": "vintage",
           "saturation": 1.2,
           "show_uncertainty": true
         }' \
     --output response.json

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
cat response.json | jq -r '.colorized_image' | sed 's/data:image\/png;base64,//' | base64 -d > colorized_output.png
```

### –ö–æ–ª–æ—Ä–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (Python)
```python
import requests
import base64
import json
from PIL import Image
from io import BytesIO

# –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
with open("input.jpg", "rb") as f:
    image_data = base64.b64encode(f.read()).decode("utf-8")

# –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
request_data = {
    "image_data": image_data,
    "style": "vintage",
    "saturation": 1.2,
    "contrast": 1.1,
    "show_uncertainty": True
}

# –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
response = requests.post(
    "http://localhost:8000/colorize",
    json=request_data
)

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞
if response.status_code == 200:
    data = response.json()
    
    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–ª–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    colorized_image_data = data["colorized_image"].split(",")[1]
    colorized_image = Image.open(BytesIO(base64.b64decode(colorized_image_data)))
    colorized_image.save("colorized_output.png")
    
    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç–∏, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞
    if "uncertainty_map" in data:
        uncertainty_map_data = data["uncertainty_map"].split(",")[1]
        uncertainty_map = Image.open(BytesIO(base64.b64decode(uncertainty_map_data)))
        uncertainty_map.save("uncertainty_map.png")
    
    print(f"–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: {data['processing_time']:.3f} —Å–µ–∫—É–Ω–¥")
else:
    print(f"–û—à–∏–±–∫–∞: {response.status_code} - {response.text}")
```

### –ü–∞–∫–µ—Ç–Ω–∞—è –∫–æ–ª–æ—Ä–∏–∑–∞—Ü–∏—è (Python)
```python
import requests
import base64
import json
import time
import os
from PIL import Image
from io import BytesIO

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ base64
def encode_images(image_paths):
    encoded_images = []
    for path in image_paths:
        with open(path, "rb") as f:
            encoded_images.append(base64.b64encode(f.read()).decode("utf-8"))
    return encoded_images

# –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –∫–æ–ª–æ—Ä–∏–∑–∞—Ü–∏–∏
image_paths = ["image1.jpg", "image2.jpg", "image3.jpg"]
encoded_images = encode_images(image_paths)

# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–∞–∫–µ—Ç–Ω—É—é –∫–æ–ª–æ—Ä–∏–∑–∞—Ü–∏—é
response = requests.post(
    "http://localhost:8000/batch/colorize",
    json={
        "images": encoded_images,
        "is_urls": False,
        "style": "vintage",
        "saturation": 1.2,
        "contrast": 1.1
    }
)

batch_id = response.json()["batch_id"]
print(f"Batch ID: {batch_id}")

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏
while True:
    status_response = requests.get(f"http://localhost:8000/batch/status/{batch_id}")
    status_data = status_response.json()
    
    print(f"–ü—Ä–æ–≥—Ä–µ—Å—Å: {status_data['processed_images']}/{status_data['total_images']} "
          f"({status_data['progress_percent']:.1f}%)")
    
    if status_data["status"] in ["completed", "failed"]:
        break
        
    time.sleep(1)

# –ü–æ–ª—É—á–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
results_response = requests.get(f"http://localhost:8000/batch/results/{batch_id}")
results_data = results_response.json()

# –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
if results_data["status"] == "completed":
    os.makedirs("batch_results", exist_ok=True)
    
    for i, result in enumerate(results_data["results"]):
        img_data = result["colorized_image"].split(",")[1]
        img = Image.open(BytesIO(base64.b64decode(img_data)))
        img.save(f"batch_results/result_{i}.png")
    
    print(f"–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é 'batch_results/'")
else:
    print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ: {results_data['errors']}")
```

## üõ†Ô∏è SDK –¥–ª—è Python

TintoraAI –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç Python SDK –¥–ª—è —É–¥–æ–±–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
```python
from API import TintoraAISDK

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SDK
sdk = TintoraAISDK(checkpoint_path="experiments/checkpoints/model.pth")

# –ö–æ–ª–æ—Ä–∏–∑–∞—Ü–∏—è –æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
result = sdk.colorize_image(
    image_path="input.jpg",
    output_path="colorized_output.png",
    style="vintage",
    saturation=1.2,
    contrast=1.1
)

# –ö–æ–ª–æ—Ä–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
stats = sdk.colorize_directory(
    input_dir="input/batch",
    output_dir="output/colorized",
    style="default",
    recursive=True
)

print(f"–£—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ {stats['success']} –∏–∑ {stats['total']} –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π")
```

## üìö –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

### –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∞–∫–µ—Ç–∞ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É
```python
import requests
import base64
import json
import time
import os

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
def encode_images_from_dir(directory):
    encoded_images = []
    for filename in os.listdir(directory):
        if filename.lower().endswith(('.jpg', '.jpeg', '.png')):
            with open(os.path.join(directory, filename), "rb") as f:
                encoded_images.append(base64.b64encode(f.read()).decode("utf-8"))
    return encoded_images

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
encoded_images = encode_images_from_dir("input/batch")

# –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
response = requests.post(
    "http://localhost:8000/batch/colorize",
    json={
        "images": encoded_images,
        "is_urls": False,
        "style": "vintage",
        "saturation": 1.2,
        "contrast": 1.1,
        "notify_url": "https://example.com/webhook",
        "callback_id": "batch_job_123",
        "priority": 2
    }
)

batch_id = response.json()["batch_id"]
print(f"–ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—É—â–µ–Ω–∞. ID: {batch_id}")

# –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–ª–∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å
```

## üåä –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Ç–æ–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

TintoraAI API –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–æ—Ç–æ–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ—Å—Ç—É–ø–∞—é—Ç –∏–∑ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—á–µ—Ä–µ–¥–∏
–î–ª—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –æ—á–µ—Ä–µ–¥–∏:
1. –ü–æ–º–µ—Å—Ç–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `input/queue/`
2. API –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ `output/colorized/`
3. –î–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —ç—Ç–æ–≥–æ —Ä–µ–∂–∏–º–∞:
```bash
# –ó–∞–ø—É—Å–∫ API –≤ —Ä–µ–∂–∏–º–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∑–∞ –æ—á–µ—Ä–µ–¥—å—é
python API.py --checkpoint experiments/checkpoints/model.pth --watch-queue --queue-interval 5
```

### WebSocket API –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–∏
API —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç WebSocket-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö:
```python
import asyncio
import websockets
import json
import base64

async def stream_images():
    uri = "ws://localhost:8000/ws/colorize"
    
    async with websockets.connect(uri) as websocket:
        # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Å—Å–∏–∏
        await websocket.send(json.dumps({
            "type": "config",
            "style": "vintage",
            "saturation": 1.2
        }))
        
        # –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –ø–æ—Ç–æ–∫–µ
        for i in range(5):
            # –ß—Ç–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            with open(f"input/stream/image{i}.jpg", "rb") as f:
                image_data = base64.b64encode(f.read()).decode("utf-8")
            
            # –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            await websocket.send(json.dumps({
                "type": "image",
                "image_data": image_data,
                "frame_id": i
            }))
            
            # –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            response = await websocket.recv()
            data = json.loads(response)
            
            print(f"–ü–æ–ª—É—á–µ–Ω–æ –∫–æ–ª–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –∫–∞–¥—Ä–∞ {data['frame_id']}")
            
            # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            colorized_data = data["colorized_image"].split(",")[1]
            with open(f"output/stream/colorized_{i}.jpg", "wb") as f:
                f.write(base64.b64decode(colorized_data))

asyncio.run(stream_images())
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API —á–µ—Ä–µ–∑ YAML
API TintoraAI –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª `configs/inference_config.yaml`:
```yaml
api:
  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ API
  enable_server: true
  host: "0.0.0.0"
  port: 8000
  workers: 1
  
  # –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
  cors_origins: ["*"]
  api_key_required: false
  api_key: ""
  
  # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
  max_file_size_mb: 10
  rate_limit: 60
  timeout: 30
```

### –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ—Ä—Ç–∞ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export TINTORAI_API_PORT=9000
export TINTORAI_API_HOST=0.0.0.0
export TINTORAI_API_KEY_REQUIRED=true
export TINTORAI_API_KEY=your_secret_api_key

# –ó–∞–ø—É—Å–∫ API —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
python API.py --checkpoint experiments/checkpoints/model.pth
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
–î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–æ–±–∞–≤—å—Ç–µ API-–∫–ª—é—á –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
```yaml
api:
  api_key_required: true
  api_key: "your_secret_api_key"
```

–ò –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫:
```bash
curl -X POST "http://localhost:8000/colorize" \
     -H "Content-Type: application/json" \
     -H "X-API-Key: your_secret_api_key" \
     -d '{
           "image_data": "base64_encoded_image",
           "style": "default"
         }'
```

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

API TintoraAI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ HTTP –∫–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤:

| –ö–æ–¥ | –ó–Ω–∞—á–µ–Ω–∏–µ              | –û–ø–∏—Å–∞–Ω–∏–µ                            |
|-----|-----------------------|-------------------------------------|
| 200 | OK                    | –ó–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω            |
| 202 | Accepted              | –ó–∞–ø—Ä–æ—Å –ø—Ä–∏–Ω—è—Ç –Ω–∞ –ø–∞–∫–µ—Ç–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É |
| 400 | Bad Request           | –ù–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞          |
| 401 | Unauthorized          | –ù–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π API-–∫–ª—é—á |
| 404 | Not Found             | –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω                   |
| 413 | Payload Too Large     | –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π —Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è    |
| 429 | Too Many Requests     | –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤            |
| 500 | Internal Server Error | –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞          |
| 503 | Service Unavailable   | –°–µ—Ä–≤–∏—Å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω         |

### –ü—Ä–∏–º–µ—Ä—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
```python
import requests

try:
    response = requests.post(
        "http://localhost:8000/colorize",
        json={
            "image_data": "invalid_base64_data",
            "style": "default"
        }
    )
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
    response.raise_for_status()
    
    data = response.json()
    print(f"–£—Å–ø–µ—à–Ω–æ: {data['message']}")
    
except requests.exceptions.HTTPError as e:
    status_code = e.response.status_code
    error_data = e.response.json()
    
    if status_code == 400:
        print(f"–û—à–∏–±–∫–∞ –≤ –∑–∞–ø—Ä–æ—Å–µ: {error_data['detail']}")
    elif status_code == 401:
        print("–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: –ù–µ–≤–µ—Ä–Ω—ã–π API-–∫–ª—é—á")
    elif status_code == 429:
        print(f"–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —á–µ—Ä–µ–∑ {error_data.get('retry_after', 60)} —Å–µ–∫—É–Ω–¥")
    else:
        print(f"–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: {error_data['detail']}")
```

## üîå –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º (JavaScript)
```javascript
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ–ª–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ —Ñ–æ—Ä–º—ã
async function colorizeImage() {
    const fileInput = document.getElementById('imageInput');
    const styleSelect = document.getElementById('styleSelect');
    const resultImage = document.getElementById('resultImage');
    const loadingIndicator = document.getElementById('loading');
    
    if (!fileInput.files || !fileInput.files[0]) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ');
        return;
    }
    
    const file = fileInput.files[0];
    const reader = new FileReader();
    
    reader.onload = async function(e) {
        // –ü–æ–ª—É—á–∞–µ–º base64 —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
        const base64Image = e.target.result.split(',')[1];
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
        loadingIndicator.style.display = 'block';
        resultImage.style.display = 'none';
        
        try {
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ API
            const response = await fetch('http://localhost:8000/colorize', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    image_data: base64Image,
                    style: styleSelect.value,
                    saturation: 1.2,
                    show_uncertainty: false
                })
            });
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞
            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.detail || '–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ª–æ—Ä–∏–∑–∞—Ü–∏–∏');
            }
            
            // –ü–æ–ª—É—á–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            const data = await response.json();
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            resultImage.src = data.colorized_image;
            resultImage.style.display = 'block';
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
            document.getElementById('metadata').textContent = 
                JSON.stringify(data.metadata, null, 2);
                
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞:', error);
            alert(`–û—à–∏–±–∫–∞: ${error.message}`);
        } finally {
            // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
            loadingIndicator.style.display = 'none';
        }
    };
    
    reader.readAsDataURL(file);
}
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–±–∏–ª—å–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º (Flutter)
```dart
import 'dart:convert';
import 'dart:io';
import 'package:flutter/material.dart';
import 'package:http/http.dart' as http;
import 'package:image_picker/image_picker.dart';

Future<void> colorizeImage(BuildContext context) async {
  final picker = ImagePicker();
  final pickedFile = await picker.getImage(source: ImageSource.gallery);
  
  if (pickedFile != null) {
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
    showDialog(
      context: context,
      barrierDismissible: false,
      builder: (BuildContext context) {
        return Center(child: CircularProgressIndicator());
      },
    );
    
    try {
      // –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª
      File imageFile = File(pickedFile.path);
      List<int> imageBytes = await imageFile.readAsBytes();
      String base64Image = base64Encode(imageBytes);
      
      // –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞
      var requestData = {
        'image_data': base64Image,
        'style': 'vintage',
        'saturation': 1.2,
        'contrast': 1.0
      };
      
      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å
      final response = await http.post(
        Uri.parse('http://api.example.com/colorize'),
        headers: {'Content-Type': 'application/json'},
        body: jsonEncode(requestData),
      );
      
      // –ó–∞–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
      Navigator.pop(context);
      
      if (response.statusCode == 200) {
        var data = jsonDecode(response.body);
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        showDialog(
          context: context,
          builder: (BuildContext context) {
            return AlertDialog(
              title: Text('–†–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ–ª–æ—Ä–∏–∑–∞—Ü–∏–∏'),
              content: Image.memory(base64Decode(
                data['colorized_image'].split(',')[1]
              )),
              actions: <Widget>[
                TextButton(
                  child: Text('–ó–∞–∫—Ä—ã—Ç—å'),
                  onPressed: () => Navigator.pop(context),
                ),
                TextButton(
                  child: Text('–°–æ—Ö—Ä–∞–Ω–∏—Ç—å'),
                  onPressed: () {
                    // –ö–æ–¥ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                  },
                ),
              ],
            );
          },
        );
      } else {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
        ScaffoldMessenger.of(context).showSnackBar(
          SnackBar(content: Text('–û—à–∏–±–∫–∞: ${response.statusCode}')),
        );
      }
    } catch (e) {
      // –ó–∞–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
      Navigator.pop(context);
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(content: Text('–û—à–∏–±–∫–∞: $e')),
      );
    }
  }
}
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–∏—Å–æ–º (Node.js)
```javascript
const express = require('express');
const multer = require('multer');
const axios = require('axios');
const fs = require('fs');
const path = require('path');

const app = express();
const upload = multer({ dest: 'uploads/' });

// –≠–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –∫–æ–ª–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ TintoraAI API
app.post('/api/colorize', upload.single('image'), async (req, res) => {
    try {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞
        if (!req.file) {
            return res.status(400).json({ error: '–ù–µ –≤—ã–±—Ä–∞–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ' });
        }
        
        // –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª
        const imageBuffer = fs.readFileSync(req.file.path);
        const base64Image = imageBuffer.toString('base64');
        
        // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
        const requestData = {
            image_data: base64Image,
            style: req.body.style || 'default',
            saturation: parseFloat(req.body.saturation) || 1.0,
            contrast: parseFloat(req.body.contrast) || 1.0,
            show_uncertainty: req.body.show_uncertainty === 'true'
        };
        
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ TintoraAI API
        const response = await axios.post('http://localhost:8000/colorize', requestData, {
            headers: {
                'Content-Type': 'application/json',
                'X-API-Key': process.env.TINTORAI_API_KEY || ''
            },
            timeout: 30000 // 30 —Å–µ–∫—É–Ω–¥
        });
        
        // –£–¥–∞–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
        fs.unlinkSync(req.file.path);
        
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        res.json(response.data);
        
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ª–æ—Ä–∏–∑–∞—Ü–∏–∏:', error);
        
        // –£–¥–∞–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏
        if (req.file && fs.existsSync(req.file.path)) {
            fs.unlinkSync(req.file.path);
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø –æ—à–∏–±–∫–∏
        if (error.response) {
            // –û—à–∏–±–∫–∞ –æ—Ç API TintoraAI
            res.status(error.response.status).json({
                error: error.response.data.detail || '–û—à–∏–±–∫–∞ –æ—Ç API TintoraAI'
            });
        } else {
            // –î—Ä—É–≥–∏–µ –æ—à–∏–±–∫–∏
            res.status(500).json({
                error: '–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞',
                details: error.message
            });
        }
    }
});

// –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
    console.log(`–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É ${PORT}`);
});
```

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é API TintoraAI –∏–ª–∏ –≤–∞–º –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∫–æ–º–∞–Ω–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —á–µ—Ä–µ–∑ GitHub Issues –∏–ª–∏ –ø–æ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç–µ.